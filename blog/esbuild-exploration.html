<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Using esbuild As Your New Bundler</title><meta content="Thoughts regarding esbuild as replacement of existing bundlers &amp; babel for developing packages." name="description"/><meta property="og:site_name" content="Using esbuild As Your New Bundler"/><meta property="og:description" content="Thoughts regarding esbuild as replacement of existing bundlers &amp; babel for developing packages."/><meta property="og:title" content="Using esbuild As Your New Bundler"/><meta property="og:url" content="https://josteph.github.io/blog/esbuild-exploration"/><meta property="og:type" content="article"/><meta name="twitter:title" content="Using esbuild As Your New Bundler"/><meta name="twitter:description" content="Thoughts regarding esbuild as replacement of existing bundlers &amp; babel for developing packages."/><meta name="twitter:label1" content="Published on"/><meta name="twitter:data1" content="March 8, 2021"/><link rel="preload" href="https://unpkg.com/prismjs@0.0.1/themes/prism-tomorrow.css" as="script"/><link href="https://unpkg.com/prismjs@0.0.1/themes/prism-tomorrow.css" rel="stylesheet"/><script type="application/ld+json">{"@context":"http://schema.org","@graph":[{"@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://josteph.github.io/blog/esbuild-exploration","name":"Using esbuild As Your New Bundler"}}]},{"@context":"http://schema.org","@type":"BlogPosting","url":"https://josteph.github.io/blog/esbuild-exploration","alternateName":"Joshua Stephen","name":"Using esbuild As Your New Bundler","headline":"Using esbuild As Your New Bundler","description":"Thoughts regarding esbuild as replacement of existing bundlers & babel for developing packages.","author":{"@type":"Person","name":"Joshua Stephen"},"publisher":{"@type":"Organization","url":"https://josteph.github.io","logo":"icons/apple-icon.png","name":"Joshua Stephen"},"mainEntityOfPage":{"@type":"WebSite","@id":"https://josteph.github.io"}}]}</script><meta name="next-head-count" content="16"/><link rel="preload" href="https://josteph.github.io/_next/static/css/ea8f6104c87a2b0ae19a.css" as="style"/><link rel="stylesheet" href="https://josteph.github.io/_next/static/css/ea8f6104c87a2b0ae19a.css" data-n-g=""/><link rel="preload" href="https://josteph.github.io/_next/static/css/5a51b3825af90dfac6b7.css" as="style"/><link rel="stylesheet" href="https://josteph.github.io/_next/static/css/5a51b3825af90dfac6b7.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="https://josteph.github.io/_next/static/chunks/webpack-a730ba9693f6f2b52fbc.js" as="script"/><link rel="preload" href="https://josteph.github.io/_next/static/chunks/framework-d39dbbbee90bbebcb2b9.js" as="script"/><link rel="preload" href="https://josteph.github.io/_next/static/chunks/597-8c1a96acb2887a4726c5.js" as="script"/><link rel="preload" href="https://josteph.github.io/_next/static/chunks/288-be88faeb97e7757bdbcd.js" as="script"/><link rel="preload" href="https://josteph.github.io/_next/static/chunks/main-7713a1ef2965e1d091b8.js" as="script"/><link rel="preload" href="https://josteph.github.io/_next/static/chunks/pages/_app-fea912f1f2cc64cc7a3c.js" as="script"/><link rel="preload" href="https://josteph.github.io/_next/static/chunks/pages/blog/%5Bslug%5D-4f17cac67fed7411136c.js" as="script"/></head><meta name="robots" content="index,follow"/><meta name="application-name" content="Joshua Stephen"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="default"/><meta name="apple-mobile-web-app-title" content="Joshua Stephen"/><meta name="format-detection" content="telephone=no"/><meta name="mobile-web-app-capable" content="yes"/><meta name="theme-color" content="#FFFFFF"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png"/><meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@jostephhh"/><meta name="twitter:creator" content="@jostephhh"/><meta name="twitter:image" content="/icons/apple-icon-120x120.png"/><meta property="og:image" content="/icons/apple-icon-120x120.png"/><link rel="manifest" href="/manifest.json"/><body><div id="__next"><header class="navbar"><nav class="nav-wrapper"><div class="nav-logo"><a href="/">Josteph</a></div></nav></header><main class="main-container"><article class="blog_page_articleContainer__3ejFe"><h1 id="using-esbuild-as-your-new-bundler">Using esbuild As Your New Bundler<a href="#using-esbuild-as-your-new-bundler" aria-hidden="true" tabindex="-1"><span class="icon icon-link">üîó</span></a></h1>
<p>Published on March 8, 2021</p>
<hr>
<h2 id="table-of-contents">Table of Contents<a href="#table-of-contents" aria-hidden="true" tabindex="-1"><span class="icon icon-link">üîó</span></a></h2>
<ul>
<li>
<p><a href="#introduction">Introduction</a></p>
</li>
<li>
<p><a href="#replacing-babel">Replacing Babel</a></p>
<ul>
<li><a href="#compiling-other-file-assets">Compiling other file assets</a></li>
</ul>
</li>
<li>
<p><a href="#using-with-existing-bundler">Using with existing bundler</a></p>
</li>
<li>
<p><a href="#future">Future</a></p>
</li>
<li>
<p><a href="#conclusion">Conclusion</a></p>
</li>
</ul>
<h2 id="introduction">Introduction<a href="#introduction" aria-hidden="true" tabindex="-1"><span class="icon icon-link">üîó</span></a></h2>
<p>You might have heard about <a href="https://esbuild.github.io/" target="_blank" rel="nofollow noopener noreferrer">esbuild</a> before even reading this post. If you did, that's great! But if you never heard about it before this, or at least you haven't tried it, then <strong>you should!</strong></p>
<p>You can make esbuild to become either a bundler, or just simply use it as a compiler in replacement of babel.</p>
<p class="hint warn">‚ö†Ô∏è
esbuild doesn't fully support <strong>es5</strong> syntax yet, you might want to reconsider about shipping stuffs with esbuild to old browsers. You can read about it in this <a href="https://github.com/evanw/esbuild/issues/297" target="_blank" rel="nofollow noopener noreferrer">thread</a>.</p>
<h2 id="replacing-babel">Replacing Babel<a href="#replacing-babel" aria-hidden="true" tabindex="-1"><span class="icon icon-link">üîó</span></a></h2>
<p>We all know about babel, how powerful babel is, and how babel has helped us building great stuffs all around the web. But in for large scale project, you might have experienced that the build time takes very long! This might become one of the biggest productivity blocker.</p>
<p>Babel simply has more overhead cost than esbuild. Even if you cache the loader, esbuild is much much faster. Although, esbuild even put <a href="https://esbuild.github.io/plugins/#plugin-api-limitations" target="_blank" rel="nofollow noopener noreferrer">restriction</a> for when writing plugin, so you might want to know this before really replacing babel, especially if you depend on specific babel plugins that is not present in esbuild.</p>
<p>Let us talk about how to replace babel with esbuild. But before this, you should know that babel can simply take a folder as entry points, but in esbuild you need to <strong>specify</strong> all the file paths that you are going to compile as an array of paths.</p>
<p>I suggest you to start from using <strong>Typescript</strong> because esbuild supports typescript natively, without adding new plugin. Therefore, I can say that probably it doesn't have any performance impact when you are compiling typescript or normal javascript files, unlike Babel.</p>
<p>If you are using typescript, you can get the list of needed files by using this method:</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token comment">// getTSConfig.js</span>

<span class="token keyword">const</span> ts <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'typescript'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getTSConfig</span><span class="token punctuation">(</span>configPath <span class="token operator">=</span> <span class="token string">'tsconfig.json'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> tsConfigFile <span class="token operator">=</span> ts<span class="token punctuation">.</span><span class="token method function property-access">findConfigFile</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token method function property-access">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ts<span class="token punctuation">.</span><span class="token property-access">sys</span><span class="token punctuation">.</span><span class="token property-access">fileExists</span><span class="token punctuation">,</span> configPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tsConfigFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">tsconfig.json does not exist in the current directory: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span><span class="token method function property-access">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> configFile <span class="token operator">=</span> ts<span class="token punctuation">.</span><span class="token method function property-access">readConfigFile</span><span class="token punctuation">(</span>tsConfigFile<span class="token punctuation">,</span> ts<span class="token punctuation">.</span><span class="token property-access">sys</span><span class="token punctuation">.</span><span class="token property-access">readFile</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>configFile<span class="token punctuation">.</span><span class="token property-access">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Cannot read TS configuration file from </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span><span class="token method function property-access">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>configFile<span class="token punctuation">.</span><span class="token property-access">error</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> tsConfig <span class="token operator">=</span> ts<span class="token punctuation">.</span><span class="token method function property-access">parseJsonConfigFileContent</span><span class="token punctuation">(</span>configFile<span class="token punctuation">.</span><span class="token property-access">config</span><span class="token punctuation">,</span> ts<span class="token punctuation">.</span><span class="token property-access">sys</span><span class="token punctuation">,</span> process<span class="token punctuation">.</span><span class="token method function property-access">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> tsConfig<span class="token punctuation">,</span> tsConfigFile <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> getTSConfig<span class="token punctuation">;</span>
</code></pre></div>
<p>Now, let's pair it together with esbuild:</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> esbuild <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'esbuild'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> getTSConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./getTSConfig'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> tsConfig<span class="token punctuation">,</span> tsConfigFile <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">getTSConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">await</span> esbuild<span class="token punctuation">.</span><span class="token method function property-access">build</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      color<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      entryPoints<span class="token operator">:</span> tsConfig<span class="token punctuation">.</span><span class="token property-access">fileNames</span><span class="token punctuation">,</span>
      outdir<span class="token operator">:</span> <span class="token constant">OUT_DIR</span><span class="token punctuation">,</span>
      loader<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'.js'</span><span class="token operator">:</span> <span class="token string">'jsx'</span><span class="token punctuation">,</span> <span class="token comment">// if you are also compiling react files</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      format<span class="token operator">:</span> <span class="token string">'esm'</span><span class="token punctuation">,</span> <span class="token comment">// can be also 'cjs'</span>
      target<span class="token operator">:</span> <span class="token string">'es2015'</span><span class="token punctuation">,</span>
      minify<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      bundle<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      tsconfig<span class="token operator">:</span> tsConfigFile<span class="token punctuation">,</span>
      plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>The example above only shown how to rely on typescript API to discover the files. In case you are not using typescript in your project, there is <a href="https://gist.github.com/lovasoa/8691344#gistcomment-2927279" target="_blank" rel="nofollow noopener noreferrer">a gist</a> that lets you list all the files path in a folder recursively. But don't forget to filter only <strong>.js</strong> or <strong>.jsx</strong> files!</p>
<h3 id="compiling-other-file-assets">Compiling other file assets<a href="#compiling-other-file-assets" aria-hidden="true" tabindex="-1"><span class="icon icon-link">üîó</span></a></h3>
<p>Using the configuration above, esbuild will skip to compile every files with extension that typescript unable to read. That means, if you are importing images in your js/ts files, they won't be exported in the out directory. This could lead to build time error.</p>
<p>Fortunately, here is a piece of code you might want to consider adding <strong>after the build process is finished</strong>:</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token spread operator">...</span>

  <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> cpy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cpy'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> relativeOutDir <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token method function property-access">relative</span><span class="token punctuation">(</span><span class="token constant">SRC_DIR</span><span class="token punctuation">,</span> <span class="token constant">OUT_DIR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword control-flow">await</span> <span class="token function">cpy</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'**'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">!**/*.{js,ts,jx,tsx}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span> relativeOutDir<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      cwd<span class="token operator">:</span> <span class="token constant">SRC_DIR</span><span class="token punctuation">,</span>
      parents<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p><strong>And you're done!</strong></p>
<p>If you are curious about the timing, try logging the time before &#x26; after each processes (build &#x26; copy).</p>
<h2 id="using-with-existing-bundler">Using with existing bundler<a href="#using-with-existing-bundler" aria-hidden="true" tabindex="-1"><span class="icon icon-link">üîó</span></a></h2>
<p>If you are using webpack, I suggest you to have a look into <a href="https://github.com/privatenumber/esbuild-loader" target="_blank" rel="nofollow noopener noreferrer">esbuild-loader</a>.</p>
<p>If you are using rollup, there is also existing <a href="https://github.com/egoist/rollup-plugin-esbuild" target="_blank" rel="nofollow noopener noreferrer">plugin</a> to pair with esbuild. You can refer to the <a href="https://github.com/josteph/elastic-node-example/blob/main/rollup.config.js" target="_blank" rel="nofollow noopener noreferrer">full configuration</a> I have tried before writing this post.</p>
<p>There is not much to be explained, but simply follow the instructions given in their README.</p>
<h2 id="future">Future<a href="#future" aria-hidden="true" tabindex="-1"><span class="icon icon-link">üîó</span></a></h2>
<p>Esbuild future looks bright. The development is actually very active, there is always a new patch coming in every 1 or 2 working days.</p>
<p>Esbuild has been adopted by <a href="https://vitejs.dev/" target="_blank" rel="nofollow noopener noreferrer">Vite.js</a> in development mode only, and also <a href="https://twitter.com/ryanflorence/status/1379498663446077440?s=20" target="_blank" rel="nofollow noopener noreferrer">Remix</a> as well.</p>
<h2 id="conclusion">Conclusion<a href="#conclusion" aria-hidden="true" tabindex="-1"><span class="icon icon-link">üîó</span></a></h2>
<p>It is not easy to fully migrate from existing build tools, there are also many unexplained limitations or edge cases of esbuild in this blog. Although, you may find several testimonies about the significant speed improvements <a href="https://github.com/privatenumber/esbuild-loader/issues/13" target="_blank" rel="nofollow noopener noreferrer">here</a>.</p>
<p>If you previously relied on babel to help optimize your app, this could be a challenge for migrating your existing app. For example you might have been using <strong>babel-plugin-lodash</strong> to help your lodash imports to be cherry-picked. Then you might need to recheck your app vendor's size. But here is the <a href="https://github.com/josteph/esbuild-plugin-lodash" target="_blank" rel="nofollow noopener noreferrer">esbuild plugin</a> to help you get similar behaviour.</p>
<p>If you are not convinced yet, just give it a try üòâ</p>
<hr>
</article></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"esbuild-exploration","meta":{"title":"Using esbuild As Your New Bundler","description":"Thoughts regarding esbuild as replacement of existing bundlers \u0026 babel for developing packages.","published":"March 8, 2021"},"content":"\u003ch1 id=\"using-esbuild-as-your-new-bundler\"\u003eUsing esbuild As Your New Bundler\u003ca href=\"#using-esbuild-as-your-new-bundler\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003eüîó\u003c/span\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003ePublished on March 8, 2021\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"table-of-contents\"\u003eTable of Contents\u003ca href=\"#table-of-contents\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003eüîó\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"#introduction\"\u003eIntroduction\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"#replacing-babel\"\u003eReplacing Babel\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#compiling-other-file-assets\"\u003eCompiling other file assets\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"#using-with-existing-bundler\"\u003eUsing with existing bundler\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"#future\"\u003eFuture\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"#conclusion\"\u003eConclusion\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"introduction\"\u003eIntroduction\u003ca href=\"#introduction\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003eüîó\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eYou might have heard about \u003ca href=\"https://esbuild.github.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eesbuild\u003c/a\u003e before even reading this post. If you did, that's great! But if you never heard about it before this, or at least you haven't tried it, then \u003cstrong\u003eyou should!\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eYou can make esbuild to become either a bundler, or just simply use it as a compiler in replacement of babel.\u003c/p\u003e\n\u003cp class=\"hint warn\"\u003e‚ö†Ô∏è\nesbuild doesn't fully support \u003cstrong\u003ees5\u003c/strong\u003e syntax yet, you might want to reconsider about shipping stuffs with esbuild to old browsers. You can read about it in this \u003ca href=\"https://github.com/evanw/esbuild/issues/297\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ethread\u003c/a\u003e.\u003c/p\u003e\n\u003ch2 id=\"replacing-babel\"\u003eReplacing Babel\u003ca href=\"#replacing-babel\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003eüîó\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eWe all know about babel, how powerful babel is, and how babel has helped us building great stuffs all around the web. But in for large scale project, you might have experienced that the build time takes very long! This might become one of the biggest productivity blocker.\u003c/p\u003e\n\u003cp\u003eBabel simply has more overhead cost than esbuild. Even if you cache the loader, esbuild is much much faster. Although, esbuild even put \u003ca href=\"https://esbuild.github.io/plugins/#plugin-api-limitations\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003erestriction\u003c/a\u003e for when writing plugin, so you might want to know this before really replacing babel, especially if you depend on specific babel plugins that is not present in esbuild.\u003c/p\u003e\n\u003cp\u003eLet us talk about how to replace babel with esbuild. But before this, you should know that babel can simply take a folder as entry points, but in esbuild you need to \u003cstrong\u003especify\u003c/strong\u003e all the file paths that you are going to compile as an array of paths.\u003c/p\u003e\n\u003cp\u003eI suggest you to start from using \u003cstrong\u003eTypescript\u003c/strong\u003e because esbuild supports typescript natively, without adding new plugin. Therefore, I can say that probably it doesn't have any performance impact when you are compiling typescript or normal javascript files, unlike Babel.\u003c/p\u003e\n\u003cp\u003eIf you are using typescript, you can get the list of needed files by using this method:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token comment\"\u003e// getTSConfig.js\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e ts \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'typescript'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003egetTSConfig\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003econfigPath \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e'tsconfig.json'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e tsConfigFile \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ts\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003efindConfigFile\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eprocess\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecwd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ts\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003esys\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003efileExists\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e configPath\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e!\u003c/span\u003etsConfigFile\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003ethrow\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eError\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003etsconfig.json does not exist in the current directory: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003eprocess\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecwd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e configFile \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ts\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ereadConfigFile\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etsConfigFile\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ts\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003esys\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ereadFile\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003econfigFile\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eerror\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003ethrow\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eError\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003eCannot read TS configuration file from \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003eprocess\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecwd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003econfigFile\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eerror\u003c/span\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e tsConfig \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ts\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eparseJsonConfigFileContent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003econfigFile\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003econfig\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ts\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003esys\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e process\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecwd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e tsConfig\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e tsConfigFile \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\nmodule\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eexports\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e getTSConfig\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eNow, let's pair it together with esbuild:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e esbuild \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'esbuild'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e getTSConfig \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'./getTSConfig'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003ebuild\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e tsConfig\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e tsConfigFile \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003egetTSConfig\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token keyword control-flow\"\u003etry\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003eawait\u003c/span\u003e esbuild\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ebuild\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      color\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      entryPoints\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e tsConfig\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003efileNames\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      outdir\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eOUT_DIR\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      loader\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token string\"\u003e'.js'\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'jsx'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// if you are also compiling react files\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      format\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'esm'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// can be also 'cjs'\u003c/span\u003e\n      target\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'es2015'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      minify\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      bundle\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      tsconfig\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e tsConfigFile\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      plugins\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// optional\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword control-flow\"\u003ecatch\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eerror\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eerror\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eerror\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThe example above only shown how to rely on typescript API to discover the files. In case you are not using typescript in your project, there is \u003ca href=\"https://gist.github.com/lovasoa/8691344#gistcomment-2927279\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ea gist\u003c/a\u003e that lets you list all the files path in a folder recursively. But don't forget to filter only \u003cstrong\u003e.js\u003c/strong\u003e or \u003cstrong\u003e.jsx\u003c/strong\u003e files!\u003c/p\u003e\n\u003ch3 id=\"compiling-other-file-assets\"\u003eCompiling other file assets\u003ca href=\"#compiling-other-file-assets\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003eüîó\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eUsing the configuration above, esbuild will skip to compile every files with extension that typescript unable to read. That means, if you are importing images in your js/ts files, they won't be exported in the out directory. This could lead to build time error.\u003c/p\u003e\n\u003cp\u003eFortunately, here is a piece of code you might want to consider adding \u003cstrong\u003eafter the build process is finished\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003ebuild\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003e\n\n  \u003cspan class=\"token keyword control-flow\"\u003etry\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e cpy \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'cpy'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e relativeOutDir \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e path\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003erelative\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eSRC_DIR\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eOUT_DIR\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword control-flow\"\u003eawait\u003c/span\u003e \u003cspan class=\"token function\"\u003ecpy\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'**'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003e!**/*.{js,ts,jx,tsx}\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e relativeOutDir\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      cwd\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eSRC_DIR\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      parents\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword control-flow\"\u003ecatch\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eerror\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eerror\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eerror\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cstrong\u003eAnd you're done!\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eIf you are curious about the timing, try logging the time before \u0026#x26; after each processes (build \u0026#x26; copy).\u003c/p\u003e\n\u003ch2 id=\"using-with-existing-bundler\"\u003eUsing with existing bundler\u003ca href=\"#using-with-existing-bundler\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003eüîó\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eIf you are using webpack, I suggest you to have a look into \u003ca href=\"https://github.com/privatenumber/esbuild-loader\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eesbuild-loader\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eIf you are using rollup, there is also existing \u003ca href=\"https://github.com/egoist/rollup-plugin-esbuild\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eplugin\u003c/a\u003e to pair with esbuild. You can refer to the \u003ca href=\"https://github.com/josteph/elastic-node-example/blob/main/rollup.config.js\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003efull configuration\u003c/a\u003e I have tried before writing this post.\u003c/p\u003e\n\u003cp\u003eThere is not much to be explained, but simply follow the instructions given in their README.\u003c/p\u003e\n\u003ch2 id=\"future\"\u003eFuture\u003ca href=\"#future\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003eüîó\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eEsbuild future looks bright. The development is actually very active, there is always a new patch coming in every 1 or 2 working days.\u003c/p\u003e\n\u003cp\u003eEsbuild has been adopted by \u003ca href=\"https://vitejs.dev/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eVite.js\u003c/a\u003e in development mode only, and also \u003ca href=\"https://twitter.com/ryanflorence/status/1379498663446077440?s=20\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eRemix\u003c/a\u003e as well.\u003c/p\u003e\n\u003ch2 id=\"conclusion\"\u003eConclusion\u003ca href=\"#conclusion\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003eüîó\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eIt is not easy to fully migrate from existing build tools, there are also many unexplained limitations or edge cases of esbuild in this blog. Although, you may find several testimonies about the significant speed improvements \u003ca href=\"https://github.com/privatenumber/esbuild-loader/issues/13\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eIf you previously relied on babel to help optimize your app, this could be a challenge for migrating your existing app. For example you might have been using \u003cstrong\u003ebabel-plugin-lodash\u003c/strong\u003e to help your lodash imports to be cherry-picked. Then you might need to recheck your app vendor's size. But here is the \u003ca href=\"https://github.com/josteph/esbuild-plugin-lodash\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eesbuild plugin\u003c/a\u003e to help you get similar behaviour.\u003c/p\u003e\n\u003cp\u003eIf you are not convinced yet, just give it a try üòâ\u003c/p\u003e\n\u003chr\u003e\n"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"esbuild-exploration"},"buildId":"fbafe51cdd270829897793ee1fa72b32a2bf5b7a","assetPrefix":"https://josteph.github.io","runtimeConfig":{"GQL_HOST":"/api/dev/graphql"},"nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="https://josteph.github.io/_next/static/chunks/polyfills-8683bd742a84c1edd48c.js"></script><script src="https://josteph.github.io/_next/static/chunks/webpack-a730ba9693f6f2b52fbc.js" async=""></script><script src="https://josteph.github.io/_next/static/chunks/framework-d39dbbbee90bbebcb2b9.js" async=""></script><script src="https://josteph.github.io/_next/static/chunks/597-8c1a96acb2887a4726c5.js" async=""></script><script src="https://josteph.github.io/_next/static/chunks/288-be88faeb97e7757bdbcd.js" async=""></script><script src="https://josteph.github.io/_next/static/chunks/main-7713a1ef2965e1d091b8.js" async=""></script><script src="https://josteph.github.io/_next/static/chunks/pages/_app-fea912f1f2cc64cc7a3c.js" async=""></script><script src="https://josteph.github.io/_next/static/chunks/pages/blog/%5Bslug%5D-4f17cac67fed7411136c.js" async=""></script><script src="https://josteph.github.io/_next/static/fbafe51cdd270829897793ee1fa72b32a2bf5b7a/_buildManifest.js" async=""></script><script src="https://josteph.github.io/_next/static/fbafe51cdd270829897793ee1fa72b32a2bf5b7a/_ssgManifest.js" async=""></script></body></html>